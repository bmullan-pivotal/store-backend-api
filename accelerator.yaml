accelerator:
  displayName: Backend API for online-stores
  description: Accelerator to create Backend API service for online stores
  iconUrl: https://raw.githubusercontent.com/simple-starters/icons/master/icon-boot.png
  tags:
  - onlinestore-dev

  options:
  - name: firstApiGroup
    label: First level API Group
    description: Name of the first level API group
    dataType: string
    inputType: text
    required: true

engine:
  sources:
  - includes: [ "**" ]
    excludes: [ "kubernetes/**" ]
  - includes: [ "pom.xml" ]
    transformations:
    - type: ReplaceText
      substitutions:
      - text: hello-fun
        with: "#artifactId"
  - includes: [ "kubernetes/k8s/deployment.yaml", "kubernetes/k8s/service.yaml" ]
    condition: "#deploymentType == 'k8s-simple'"
    transformations:
    - type: ReplaceText
      substitutions:
      - text: hello-fun
        with: "#artifactId"
    - type: RewritePath
      rewriteTo: "'kubernetes/' + #filename"
  - includes: [ "kubernetes/k8s/skaffold.yaml" ]
    condition: "#deploymentType == 'k8s-simple'"
    transformations:
    - type: ReplaceText
      substitutions:
      - text: hello-fun
        with: "#artifactId"
    - type: RewritePath
      rewriteTo: "#filename"
  - includes: [ "kubernetes/knative/service.yaml" ]
    condition: "#deploymentType == 'knative'"
    transformations:
    - type: ReplaceText
      substitutions:
      - text: hello-fun
        with: "#artifactId"
    - type: RewritePath
      rewriteTo: "'kubernetes/' + #filename"
  - includes: [ "kubernetes/knative/skaffold.yaml" ]
    condition: "#deploymentType == 'knative'"
    transformations:
    - type: ReplaceText
      substitutions:
      - text: hello-fun
        with: "#artifactId"
    - type: RewritePath
      rewriteTo: "#filename"
